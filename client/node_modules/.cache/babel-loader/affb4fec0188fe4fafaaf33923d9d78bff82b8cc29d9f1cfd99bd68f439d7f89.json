{"ast":null,"code":"import _regeneratorRuntime from\"/Users/bc/Documents/Coding/Lehman/CMP 464/Final Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/bc/Documents/Coding/Lehman/CMP 464/Final Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/bc/Documents/Coding/Lehman/CMP 464/Final Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";// /client/LinkContainer.js\nimport{React,useState,useEffect}from'react';import Table from'./Table';import Form from'./Form';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var LinkContainer=function LinkContainer(props){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),links=_useState2[0],setLinks=_useState2[1];var fetchLinks=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var response,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"/links\");case 3:response=_context.sent;console.log(response);_context.next=7;return response.json();case 7:data=_context.sent;setLinks(data);console.log(data);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 15:case\"end\":return _context.stop();}},_callee,null,[[0,12]]);}));return function fetchLinks(){return _ref.apply(this,arguments);};}();var postLink=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(newLink){var response,message;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return fetch('/links',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(newLink)});case 3:response=_context2.sent;console.log(response);_context2.next=7;return response.text();case 7:message=_context2.sent;console.log(message);_context2.next=14;break;case 11:_context2.prev=11;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 14:case\"end\":return _context2.stop();}},_callee2,null,[[0,11]]);}));return function postLink(_x){return _ref2.apply(this,arguments);};}();var deleteLink=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){var response,message;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return fetch(\"/links/\".concat(id),{method:'DELETE'});case 3:response=_context3.sent;console.log(response);_context3.next=7;return response.text();case 7:message=_context3.sent;console.log(message);_context3.next=14;break;case 11:_context3.prev=11;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 14:case\"end\":return _context3.stop();}},_callee3,null,[[0,11]]);}));return function deleteLink(_x2){return _ref3.apply(this,arguments);};}();useEffect(function(){if(links==null){fetchLinks();}},[]);var handleRemove=function handleRemove(index){var updatedLinks=links.filter(function(_,i){return i!==index;});setLinks(updatedLinks);deleteLink(links[index].id);};var handleSubmit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(favLink){return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:// save data to postgres\npostLink(favLink);// pull latest data from postgres\nfetchLinks();console.log(favLink);case 3:case\"end\":return _context4.stop();}},_callee4);}));return function handleSubmit(_x3){return _ref4.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"My Favorite Links\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Add a new url with a name and link to the table.\"}),/*#__PURE__*/_jsx(Table,{linkData:links,removeLink:handleRemove}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"h3\",{children:\"Add New\"}),/*#__PURE__*/_jsx(Form,{handleSubmit:handleSubmit})]});};export default LinkContainer;","map":{"version":3,"names":["React","useState","useEffect","Table","Form","jsx","_jsx","jsxs","_jsxs","LinkContainer","props","_useState","_useState2","_slicedToArray","links","setLinks","fetchLinks","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","response","data","wrap","_callee$","_context","prev","next","fetch","sent","console","log","json","t0","stop","apply","arguments","postLink","_ref2","_callee2","newLink","message","_callee2$","_context2","method","headers","body","JSON","stringify","text","_x","deleteLink","_ref3","_callee3","id","_callee3$","_context3","concat","_x2","handleRemove","index","updatedLinks","filter","_","i","handleSubmit","_ref4","_callee4","favLink","_callee4$","_context4","_x3","className","children","linkData","removeLink"],"sources":["/Users/bc/Documents/Coding/Lehman/CMP 464/Final Project/client/src/components/LinkContainer.js"],"sourcesContent":["// /client/LinkContainer.js\n\nimport {React, useState, useEffect } from 'react'\nimport Table from './Table';\nimport Form from './Form';\n\nconst LinkContainer = (props) => {\n  const [links,setLinks] = useState(null);\n\n  const fetchLinks = async () => {\n    try {\n      let response = await fetch(\"/links\")\n      console.log(response)\n      let data = await response.json()\n      setLinks(data)\n      console.log(data)\n    } catch(error) {\n      console.log(error)\n    }\n  }\n  const postLink = async (newLink) => {\n    try {\n      let response = await fetch('/links' , {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newLink)\n      })\n      console.log(response)\n      let message = await response.text()\n      console.log(message)\n    } catch(error) {\n      console.log(error)\n    }\n  }\n  const deleteLink = async (id) => {\n    try {\n      let response = await fetch(`/links/${id}`, {\n        method: 'DELETE',\n      })\n      console.log(response)\n      let message = await response.text()\n      console.log(message)\n    } catch(error) {\n      console.log(error)\n    }\n  }\n\n  useEffect(() => {\n    if (links == null) {\n      fetchLinks()\n    }\n  }, [])\n\n  const handleRemove = (index) => {\n    const updatedLinks = links.filter((_,i) => i !== index);\n    setLinks(updatedLinks);\n    deleteLink(links[index].id)\n  }\n\n  const handleSubmit = async (favLink) => {\n\n    // save data to postgres\n    postLink(favLink)\n\n    // pull latest data from postgres\n    fetchLinks()\n    console.log(favLink)\n  }\n\n  return (\n    <div className=\"container\">\n      <h1>My Favorite Links</h1>\n      <p>Add a new url with a name and link to the table.</p>\n      <Table linkData={links} removeLink={handleRemove} />\n\n      <br />\n\n      <h3>Add New</h3>\n      <Form handleSubmit={handleSubmit} />\n    </div>\n  )\n}\n\nexport default LinkContainer\n"],"mappings":"4cAAA;AAEA,OAAQA,KAAK,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACjD,MAAO,CAAAC,KAAK,KAAM,SAAS,CAC3B,MAAO,CAAAC,IAAI,KAAM,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1B,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAAK,CAAK,CAC/B,IAAAC,SAAA,CAAyBV,QAAQ,CAAC,IAAI,CAAC,CAAAW,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAAhCG,KAAK,CAAAF,UAAA,IAACG,QAAQ,CAAAH,UAAA,IAErB,GAAM,CAAAI,UAAU,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,MAAAC,QAAA,CAAAC,IAAA,QAAAJ,mBAAA,GAAAK,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA,SAEM,CAAAC,KAAK,CAAC,QAAQ,CAAC,QAAhCP,QAAQ,CAAAI,QAAA,CAAAI,IAAA,CACZC,OAAO,CAACC,GAAG,CAACV,QAAQ,CAAC,CAAAI,QAAA,CAAAE,IAAA,SACJ,CAAAN,QAAQ,CAACW,IAAI,CAAC,CAAC,QAA5BV,IAAI,CAAAG,QAAA,CAAAI,IAAA,CACRf,QAAQ,CAACQ,IAAI,CAAC,CACdQ,OAAO,CAACC,GAAG,CAACT,IAAI,CAAC,CAAAG,QAAA,CAAAE,IAAA,kBAAAF,QAAA,CAAAC,IAAA,IAAAD,QAAA,CAAAQ,EAAA,CAAAR,QAAA,aAEjBK,OAAO,CAACC,GAAG,CAAAN,QAAA,CAAAQ,EAAM,CAAC,0BAAAR,QAAA,CAAAS,IAAA,MAAAd,OAAA,iBAErB,kBAVK,CAAAL,UAAUA,CAAA,SAAAC,IAAA,CAAAmB,KAAA,MAAAC,SAAA,OAUf,CACD,GAAM,CAAAC,QAAQ,6BAAAC,KAAA,CAAArB,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAoB,SAAOC,OAAO,MAAAnB,QAAA,CAAAoB,OAAA,QAAAvB,mBAAA,GAAAK,IAAA,UAAAmB,UAAAC,SAAA,iBAAAA,SAAA,CAAAjB,IAAA,CAAAiB,SAAA,CAAAhB,IAAA,SAAAgB,SAAA,CAAAjB,IAAA,GAAAiB,SAAA,CAAAhB,IAAA,SAEN,CAAAC,KAAK,CAAC,QAAQ,CAAG,CACpCgB,MAAM,CAAE,MAAM,CACdC,OAAO,CAAE,CACP,cAAc,CAAE,kBAClB,CAAC,CACDC,IAAI,CAAEC,IAAI,CAACC,SAAS,CAACR,OAAO,CAC9B,CAAC,CAAC,QANEnB,QAAQ,CAAAsB,SAAA,CAAAd,IAAA,CAOZC,OAAO,CAACC,GAAG,CAACV,QAAQ,CAAC,CAAAsB,SAAA,CAAAhB,IAAA,SACD,CAAAN,QAAQ,CAAC4B,IAAI,CAAC,CAAC,QAA/BR,OAAO,CAAAE,SAAA,CAAAd,IAAA,CACXC,OAAO,CAACC,GAAG,CAACU,OAAO,CAAC,CAAAE,SAAA,CAAAhB,IAAA,kBAAAgB,SAAA,CAAAjB,IAAA,IAAAiB,SAAA,CAAAV,EAAA,CAAAU,SAAA,aAEpBb,OAAO,CAACC,GAAG,CAAAY,SAAA,CAAAV,EAAM,CAAC,0BAAAU,SAAA,CAAAT,IAAA,MAAAK,QAAA,iBAErB,kBAfK,CAAAF,QAAQA,CAAAa,EAAA,SAAAZ,KAAA,CAAAH,KAAA,MAAAC,SAAA,OAeb,CACD,GAAM,CAAAe,UAAU,6BAAAC,KAAA,CAAAnC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAkC,SAAOC,EAAE,MAAAjC,QAAA,CAAAoB,OAAA,QAAAvB,mBAAA,GAAAK,IAAA,UAAAgC,UAAAC,SAAA,iBAAAA,SAAA,CAAA9B,IAAA,CAAA8B,SAAA,CAAA7B,IAAA,SAAA6B,SAAA,CAAA9B,IAAA,GAAA8B,SAAA,CAAA7B,IAAA,SAEH,CAAAC,KAAK,WAAA6B,MAAA,CAAWH,EAAE,EAAI,CACzCV,MAAM,CAAE,QACV,CAAC,CAAC,QAFEvB,QAAQ,CAAAmC,SAAA,CAAA3B,IAAA,CAGZC,OAAO,CAACC,GAAG,CAACV,QAAQ,CAAC,CAAAmC,SAAA,CAAA7B,IAAA,SACD,CAAAN,QAAQ,CAAC4B,IAAI,CAAC,CAAC,QAA/BR,OAAO,CAAAe,SAAA,CAAA3B,IAAA,CACXC,OAAO,CAACC,GAAG,CAACU,OAAO,CAAC,CAAAe,SAAA,CAAA7B,IAAA,kBAAA6B,SAAA,CAAA9B,IAAA,IAAA8B,SAAA,CAAAvB,EAAA,CAAAuB,SAAA,aAEpB1B,OAAO,CAACC,GAAG,CAAAyB,SAAA,CAAAvB,EAAM,CAAC,0BAAAuB,SAAA,CAAAtB,IAAA,MAAAmB,QAAA,iBAErB,kBAXK,CAAAF,UAAUA,CAAAO,GAAA,SAAAN,KAAA,CAAAjB,KAAA,MAAAC,SAAA,OAWf,CAEDnC,SAAS,CAAC,UAAM,CACd,GAAIY,KAAK,EAAI,IAAI,CAAE,CACjBE,UAAU,CAAC,CAAC,CACd,CACF,CAAC,CAAE,EAAE,CAAC,CAEN,GAAM,CAAA4C,YAAY,CAAG,QAAf,CAAAA,YAAYA,CAAIC,KAAK,CAAK,CAC9B,GAAM,CAAAC,YAAY,CAAGhD,KAAK,CAACiD,MAAM,CAAC,SAACC,CAAC,CAACC,CAAC,QAAK,CAAAA,CAAC,GAAKJ,KAAK,GAAC,CACvD9C,QAAQ,CAAC+C,YAAY,CAAC,CACtBV,UAAU,CAACtC,KAAK,CAAC+C,KAAK,CAAC,CAACN,EAAE,CAAC,CAC7B,CAAC,CAED,GAAM,CAAAW,YAAY,6BAAAC,KAAA,CAAAjD,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAgD,SAAOC,OAAO,SAAAlD,mBAAA,GAAAK,IAAA,UAAA8C,UAAAC,SAAA,iBAAAA,SAAA,CAAA5C,IAAA,CAAA4C,SAAA,CAAA3C,IAAA,SAEjC;AACAU,QAAQ,CAAC+B,OAAO,CAAC,CAEjB;AACArD,UAAU,CAAC,CAAC,CACZe,OAAO,CAACC,GAAG,CAACqC,OAAO,CAAC,yBAAAE,SAAA,CAAApC,IAAA,MAAAiC,QAAA,GACrB,kBARK,CAAAF,YAAYA,CAAAM,GAAA,SAAAL,KAAA,CAAA/B,KAAA,MAAAC,SAAA,OAQjB,CAED,mBACE7B,KAAA,QAAKiE,SAAS,CAAC,WAAW,CAAAC,QAAA,eACxBpE,IAAA,OAAAoE,QAAA,CAAI,mBAAiB,CAAI,CAAC,cAC1BpE,IAAA,MAAAoE,QAAA,CAAG,kDAAgD,CAAG,CAAC,cACvDpE,IAAA,CAACH,KAAK,EAACwE,QAAQ,CAAE7D,KAAM,CAAC8D,UAAU,CAAEhB,YAAa,CAAE,CAAC,cAEpDtD,IAAA,QAAK,CAAC,cAENA,IAAA,OAAAoE,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBpE,IAAA,CAACF,IAAI,EAAC8D,YAAY,CAAEA,YAAa,CAAE,CAAC,EACjC,CAAC,CAEV,CAAC,CAED,cAAe,CAAAzD,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}